"use strict";(self["webpackChunkjingdong"]=self["webpackChunkjingdong"]||[]).push([[224],{9174:function(e,s,a){a.d(s,{K:function(){return o}});var t=a(6278),n=a(953),r=a(641);const o=e=>{const s=(0,t.Pj)(),{cartList:a}=(0,n.QW)(s.state),o=(e,a,t,n)=>{s.commit("changeCartItemInfo",{id:e,itemId:a,productInfo:t,num:n})},c=(0,r.EW)((()=>{const s=a.value[e]?.productList;return s})),d=(0,r.EW)((()=>{const s=a.value[e]?.shopName;return s})),i=(0,r.EW)((()=>{const s=a.value[e]?.productList;let t=0,n=0;if(s)for(const e in s)t+=s[e].count,s[e].check&&(n+=s[e].count*s[e].price);return n=n.toFixed(2),{total:t,price:n}}));return{cartList:a,changeCartItemInfo:o,products:c,shopName:d,calculations:i}}},9396:function(e,s,a){a.d(s,{A:function(){return _},g:function(){return i}});var t=a(641),n=a(33);const r={class:"toast"};function o(e,s,a,o,c,d){return(0,t.uX)(),(0,t.CE)("div",r,(0,n.v_)(a.message),1)}var c=a(953),d={name:"ToastView",props:["message"]};const i=()=>{const e=(0,c.Kh)({showToast:!1,message:""}),s=s=>{e.showToast=!0,e.message=s,setTimeout((()=>{e.showToast=!1,e.message=""}),2e3)},{showToast:a,message:t}=(0,c.QW)(e);return{showToast:a,message:t,changeToast:s}};var l=a(6262);const u=(0,l.A)(d,[["render",o],["__scopeId","data-v-25cc2708"]]);var _=u},3208:function(e,s,a){a.r(s),a.d(s,{default:function(){return d}});var t=a(641);function n(e,s,a,n,r,o){return(0,t.uX)(),(0,t.CE)("div",null,"cartList")}var r={name:"CartList"},o=a(6262);const c=(0,o.A)(r,[["render",n]]);var d=c},5925:function(e,s,a){a.r(s),a.d(s,{default:function(){return L}});var t=a(641),n=a(3751);const r=e=>((0,t.Qi)("data-v-4e59f323"),e=e(),(0,t.jt)(),e),o={class:"wrapper"},c=r((()=>(0,t.Lk)("img",{class:"wrapper__img",src:"http://www.dell-lee.com/imgs/vue3/user.png"},null,-1))),d={class:"wrapper__input"},i={class:"wrapper__input"},l={class:"wrapper__input"};function u(e,s,a,r,u,_){const p=(0,t.g2)("ToastView");return(0,t.uX)(),(0,t.CE)("div",o,[c,(0,t.Lk)("div",d,[(0,t.bo)((0,t.Lk)("input",{class:"wrapper__input__content",placeholder:"请输入用户名","onUpdate:modelValue":s[0]||(s[0]=e=>r.userName=e)},null,512),[[n.Jo,r.userName]])]),(0,t.Lk)("div",i,[(0,t.bo)((0,t.Lk)("input",{class:"wrapper__input__content",placeholder:"请输入密码",type:"password","onUpdate:modelValue":s[1]||(s[1]=e=>r.password=e)},null,512),[[n.Jo,r.password]])]),(0,t.Lk)("div",l,[(0,t.bo)((0,t.Lk)("input",{class:"wrapper__input__content",placeholder:"确认密码",type:"password","onUpdate:modelValue":s[2]||(s[2]=e=>r.checkpassword=e)},null,512),[[n.Jo,r.checkpassword]])]),(0,t.Lk)("div",{class:"wrapper__register-button",onClick:s[3]||(s[3]=(...e)=>r.handleRegister&&r.handleRegister(...e))},"注册"),(0,t.Lk)("div",{class:"wrapper__register-link",onClick:s[4]||(s[4]=(...e)=>r.handleLoginClick&&r.handleLoginClick(...e))},"已有账号，去登陆"),r.showToast?((0,t.uX)(),(0,t.Wv)(p,{key:0,message:r.message},null,8,["message"])):(0,t.Q3)("",!0)])}a(4114);var _=a(5220),p=a(953),v=a(1663),m=a(9396);const h=e=>{const s=(0,p.Kh)({userName:"",password:"",checkpassword:""}),a=(0,_.rd)(),t=async()=>{const{userName:t,password:n,checkpassword:r}=(0,p.QW)(s);if(""!==t.value&&""!==n.value)if(n.value===r.value)try{const t=await(0,v.b)("api/user/Login",{userName:s.userName,password:s.password});"12345"===t?.data?.userId?(localStorage.isLogin=!0,a.push({name:"Home"})):e("注册失败")}catch(o){e("请求失败")}else e("两次输入密码不同");else e("用户名或密码不能为空")},{userName:n,password:r,checkpassword:o}=(0,p.QW)(s);return{userName:n,password:r,checkpassword:o,handleRegister:t}},k=()=>{const e=(0,_.rd)(),s=()=>{e.push({name:"Login"})};return{handleLoginClick:s}};var w={name:"RegisterPage",components:{ToastView:m.A},setup(){const{showToast:e,message:s,changeToast:a}=(0,m.g)(),{userName:t,password:n,checkpassword:r,handleRegister:o}=h(a),{handleLoginClick:c}=k();return{showToast:e,message:s,changeToast:a,userName:t,password:n,checkpassword:r,handleRegister:o,handleLoginClick:c}}},g=a(6262);const f=(0,g.A)(w,[["render",u],["__scopeId","data-v-4e59f323"]]);var L=f},4233:function(e,s,a){a.r(s),a.d(s,{default:function(){return Y}});var t=a(641);const n={class:"wrapper"};function r(e,s,a,r,o,c){const d=(0,t.g2)("TopArea"),i=(0,t.g2)("ProductList"),l=(0,t.g2)("OrderView");return(0,t.uX)(),(0,t.CE)("div",n,[(0,t.bF)(d),(0,t.bF)(i),(0,t.bF)(l)])}const o={class:"top"},c={class:"top__header"},d=(0,t.Fv)('<div class="top__receiver" data-v-7da32448><div class="top__receiver__title" data-v-7da32448>收货地址</div><div class="top__receiver__address" data-v-7da32448>宣城工业大学合肥校区</div><div class="top__receiver__info" data-v-7da32448><span class="top__receiver__info__name" data-v-7da32448>张宇</span><span class="top__receiver__info__name" data-v-7da32448>11012010086</span></div><div class="iconfont top__receiver__enter" data-v-7da32448></div></div>',1);function i(e,s,a,n,r,i){return(0,t.uX)(),(0,t.CE)("div",o,[(0,t.Lk)("div",c,[(0,t.Lk)("div",{class:"iconfont top__header__back",onClick:s[0]||(s[0]=(...e)=>n.handleBackClick&&n.handleBackClick(...e))},""),(0,t.eW)(" 确认订单 ")]),d])}var l=a(5220),u={name:"TopArea",setup(){const e=(0,l.rd)(),s=()=>{e.back()};return{handleBackClick:s}}},_=a(6262);const p=(0,_.A)(u,[["render",i],["__scopeId","data-v-7da32448"]]);var v=p,m=a(33);const h=e=>((0,t.Qi)("data-v-5ac4f61f"),e=e(),(0,t.jt)(),e),k={class:"product"},w={class:"product__title"},g={class:"product__wrapper"},f={class:"product__list"},L=["src"],C={class:"product__item__detail"},b={class:"product__item__title"},T={class:"product__item__price"},N={class:"product__item__singlePrice"},I=h((()=>(0,t.Lk)("span",{class:"product__item__yen"},"¥ ",-1))),A={class:"product__item__totalPrice"},E=h((()=>(0,t.Lk)("span",{class:"product__item__yen"},"¥ ",-1)));function W(e,s,a,n,r,o){return(0,t.uX)(),(0,t.CE)("div",k,[(0,t.Lk)("div",w,(0,m.v_)(n.shopName),1),(0,t.Lk)("div",g,[(0,t.Lk)("div",f,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.products,(e=>((0,t.uX)(),(0,t.CE)("div",{class:"product__item",key:e.id},[(0,t.Lk)("img",{class:"product__item__img",src:e.imgUrl},null,8,L),(0,t.Lk)("div",C,[(0,t.Lk)("h4",b,(0,m.v_)(e.name),1),(0,t.Lk)("p",T,[(0,t.Lk)("span",N,[I,(0,t.eW)(" "+(0,m.v_)(e.price)+" × "+(0,m.v_)(e.count),1)]),(0,t.Lk)("span",A,[E,(0,t.eW)(" "+(0,m.v_)((e.price*e.count).toFixed(2)),1)])])])])))),128))])])])}var O=a(9174),y={name:"ProductList",setup(){const e=(0,l.lq)(),s=e.params.id,{products:a,shopName:t}=(0,O.K)(s);return{products:a,shopName:t}}};const P=(0,_.A)(y,[["render",W],["__scopeId","data-v-5ac4f61f"]]);var S=P,X=a(3751);const V=e=>((0,t.Qi)("data-v-629bf370"),e=e(),(0,t.jt)(),e),F={class:"order"},K={class:"order__price"},Q=V((()=>(0,t.Lk)("h3",{class:"mask__content__title"},"确认要离开收银台？",-1))),j=V((()=>(0,t.Lk)("p",{class:"mask__content__desc"},"请尽快完成支付，否则将被取消",-1))),R={class:"mask__content__btns"};function U(e,s,a,n,r,o){return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("div",F,[(0,t.Lk)("div",K,[(0,t.eW)("实付金额 "),(0,t.Lk)("b",null,"¥"+(0,m.v_)(n.calculations.price),1)]),(0,t.Lk)("div",{class:"order__btn",onClick:s[0]||(s[0]=()=>n.handleShowChange(!0))},"提交订单")]),(0,t.bo)((0,t.Lk)("div",{class:"mask",onClick:s[4]||(s[4]=()=>n.handleShowChange(!1))},[(0,t.Lk)("div",{class:"mask__content",onClick:s[3]||(s[3]=(0,X.D$)((()=>{}),["stop"]))},[Q,j,(0,t.Lk)("div",R,[(0,t.Lk)("div",{class:"mask__content__btn mask__content__btn--first",onClick:s[1]||(s[1]=()=>n.handleConfOrder(!0))},"取消订单"),(0,t.Lk)("div",{class:"mask__content__btn mask__content__btn--last",onClick:s[2]||(s[2]=()=>n.handleConfOrder(!1))},"确认支付")])])],512),[[X.aG,n.isShowConf]])],64)}a(4114);var B=a(6278),J=a(953),q=a(1663);const x=(e,s,a)=>{const t=(0,l.rd)(),n=(0,B.Pj)(),r=async r=>{const o=[];for(const s in e.value){const a=e.value[s];o.push({id:a.id,num:a.count})}n.commit("handleConfOrder",{id:a,isCancel:r});try{const e=await(0,q.b)("/api/user/order",{addressId:1,id:a,shopName:s.value,isCancel:r,productList:o});0===e?.errorno&&(!1===r?(n.commit("cleanCartProducts",{id:a}),t.push({name:"OrderList"})):t.push({name:"Home"}))}catch(c){}};return{handleConfOrder:r}},H=()=>{const e=(0,J.KR)(!1),s=s=>{e.value=s,console.log(e.value)};return{isShowConf:e,handleShowChange:s}};var D={name:"OrderView",setup(){const e=(0,l.lq)(),s=parseInt(e.params.id),{calculations:a,shopName:t,products:n}=(0,O.K)(s),{handleConfOrder:r}=x(n,t,s),{isShowConf:o,handleShowChange:c}=H();return{isShowConf:o,calculations:a,handleConfOrder:r,handleShowChange:c}}};const G=(0,_.A)(D,[["render",U],["__scopeId","data-v-629bf370"]]);var $=G,z={name:"OrderPage",components:{TopArea:v,ProductList:S,OrderView:$}};const M=(0,_.A)(z,[["render",r],["__scopeId","data-v-0bdd5cc4"]]);var Y=M}}]);
//# sourceMappingURL=register.6f4dc170.js.map