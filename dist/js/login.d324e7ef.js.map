{"version":3,"file":"js/login.d324e7ef.js","mappings":"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","sources":["webpack://jingdong/./src/components/Toast.vue","webpack://jingdong/./src/components/Toast.vue?44c7","webpack://jingdong/./src/views/login/Login.vue","webpack://jingdong/./src/views/login/Login.vue?9557"],"sourcesContent":["<template>\r\n  <div class=\"toast\">{{ message }}</div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs } from 'vue'\r\nexport default {\r\n  name: 'ToastView',\r\n  props: ['message']\r\n}\r\nexport const useToastEffect = () => {\r\n  const toastData = reactive({\r\n    showToast: false,\r\n    message: ''\r\n  })\r\n  const changeToast = (value) => {\r\n    toastData.showToast = true\r\n    toastData.message = value\r\n    setTimeout(() => {\r\n      toastData.showToast = false\r\n      toastData.message = ''\r\n    }, 2000)\r\n  }\r\n  const { showToast, message } = toRefs(toastData)\r\n  return { showToast, message, changeToast }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../style/viriables.scss';\r\n.toast {\r\n  position: fixed;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n  padding: .1rem;\r\n  background: rgba(0, 0, 0, 0.35);\r\n  border-radius: .05rem;\r\n  color: $bgColor;\r\n}\r\n</style>\r\n","import { render } from \"./Toast.vue?vue&type=template&id=25cc2708&scoped=true\"\nimport script from \"./Toast.vue?vue&type=script&lang=js\"\nexport * from \"./Toast.vue?vue&type=script&lang=js\"\n\nimport \"./Toast.vue?vue&type=style&index=0&id=25cc2708&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-25cc2708\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"wrapper\">\r\n    <img class=\"wrapper__img\" src=\"http://www.dell-lee.com/imgs/vue3/user.png\">\r\n    <div class=\"wrapper__input\">\r\n      <input class=\"wrapper__input__content\" placeholder=\"请输入用户名\"\r\n      v-model=\"userName\"/>\r\n    </div>\r\n    <div class=\"wrapper__input\">\r\n      <input class=\"wrapper__input__content\" placeholder=\"请输入密码\" type=\"password\"\r\n      v-model=\"password\"/>\r\n    </div>\r\n    <div class=\"wrapper__login-button\" @click=\"handleLogin\">登录</div>\r\n    <div class=\"wrapper__login-link\" @click=\"handleRegisterClick\">立即注册</div>\r\n    <ToastView v-if=\"showToast\" :message=\"message\"></ToastView>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { post } from '../../untils/request.js'\r\nimport ToastView, { useToastEffect } from '../../components/Toast'\r\n\r\nconst useLoginEffect = (changeToast) => {\r\n  const data = reactive({\r\n    userName: '',\r\n    password: ''\r\n  })\r\n  const router = useRouter()\r\n  const handleLogin = async () => {\r\n    const { userName, password } = toRefs(data)\r\n    // console.log(userName.value, password.value)\r\n    if (userName.value === '' || password.value === '') {\r\n      changeToast('用户名或密码不能为空')\r\n      return\r\n    }\r\n    try {\r\n      const result = await post('/api/user/Login', {\r\n        userName: data.userName,\r\n        password: data.password\r\n      })\r\n      if (result?.data?.userId === '12345') {\r\n        localStorage.isLogin = true\r\n        router.push({ name: 'Home' })\r\n      } else {\r\n        changeToast('登陆失败')\r\n      }\r\n    } catch (e) {\r\n      changeToast('请求失败')\r\n    }\r\n  }\r\n\r\n  const { userName, password } = toRefs(data)\r\n  return { userName, password, handleLogin }\r\n}\r\n\r\nconst useRegisterEffect = () => {\r\n  const router = useRouter()\r\n  const handleRegisterClick = () => {\r\n    router.push({ name: 'Register' })\r\n  }\r\n  return { handleRegisterClick }\r\n}\r\n\r\nexport default {\r\n  name: 'LoginPage',\r\n  components: { ToastView },\r\n  setup () {\r\n    const { showToast, message, changeToast } = useToastEffect()\r\n    const { userName, password, handleLogin } = useLoginEffect(changeToast)\r\n    const { handleRegisterClick } = useRegisterEffect()\r\n    return { handleLogin, handleRegisterClick, userName, password, showToast, message, changeToast }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/viriables.scss';\r\n.wrapper {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 0;\r\n  right: 0;\r\n  transform: translateY(-50%);\r\n  &__img {\r\n    display: block;\r\n    margin: 0 auto .4rem auto;\r\n    width: .66rem;\r\n    height: .66rem;\r\n  }\r\n  &__input {\r\n    height: .48rem;\r\n    margin: 0 .4rem .16rem .4rem;\r\n    padding: 0 .16rem;\r\n    background: #f9f9f9;\r\n    border: .01rem solid rgba(0, 0, 0, 0.1);\r\n    border-radius: .06rem;\r\n    &__content {\r\n      line-height: .44rem;\r\n      border: none;\r\n      outline: none;\r\n      width: 100%;\r\n      background: none;\r\n      font-size: .16rem;\r\n      color: $content-notice-fontColor;\r\n      &::placeholder {\r\n        color: $content-notice-fontColor;\r\n      }\r\n    }\r\n  }\r\n  &__login-button {\r\n    margin: .32rem .4rem .16rem .4rem;\r\n    background-color: $btn-bgColor;\r\n    box-shadow: 0 .04rem .08rem 0 rgba(0, 145, 255, 0.32);\r\n    border-radius: .04rem;\r\n    color: #f9f9f9;\r\n    line-height: .48rem;\r\n    font-size: .16rem;\r\n    text-align: center;\r\n  }\r\n  &__login-link {\r\n    text-align: center;\r\n    font-size: .14rem;\r\n    color: $content-notice-fontColor;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Login.vue?vue&type=template&id=e3d4bf32&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=e3d4bf32&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e3d4bf32\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_toDisplayString","$props","message","name","props","useToastEffect","toastData","reactive","showToast","changeToast","value","setTimeout","toRefs","__exports__","render","_createElementVNode","src","_hoisted_2","_hoisted_3","placeholder","_cache","$event","$setup","userName","_hoisted_4","type","password","onClick","args","handleLogin","handleRegisterClick","_createBlock","_component_ToastView","key","_createCommentVNode","useLoginEffect","data","router","useRouter","async","result","post","userId","localStorage","isLogin","push","e","useRegisterEffect","components","ToastView","setup"],"sourceRoot":""}